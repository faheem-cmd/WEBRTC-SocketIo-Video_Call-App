{"ast":null,"code":"var _jsxFileName = \"/Users/faheem/Documents/RESEARCH/VideoCall-ReactJS-WebRTC/client/src/routes/Room.js\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport Peer from \"simple-peer\";\nimport styled from \"styled-components\";\nimport micmute from \"../assets/micmute.svg\";\nimport micunmute from \"../assets/micunmute.svg\";\nimport webcam from \"../assets/webcam.svg\";\nimport webcamoff from \"../assets/webcamoff.svg\";\nconst Container = styled.div`\n  height: 100vh;\n  width: 20%;\n  height: 500;\n`;\nconst Controls = styled.div`\n  margin: 3px;\n  padding: 5px;\n  height: 27px;\n  width: 98%;\n  background-color: rgba(255, 226, 104, 0.1);\n  margin-top: -8.5vh;\n  filter: brightness(1);\n  z-index: 1;\n  border-radius: 6px;\n  height: 500;\n`;\nconst ControlSmall = styled.div`\n  margin: 3px;\n  padding: 5px;\n  height: 16px;\n  width: 98%;\n  margin-top: -6vh;\n  filter: brightness(1);\n  z-index: 1;\n  border-radius: 6px;\n  display: flex;\n  justify-content: center;\n  width: 100%;\n  height: 500;\n`;\nconst ImgComponent = styled.img`\n  cursor: pointer;\n  height: 25px;\n  width: 100%;\n  height: 500;\n`;\nconst ImgComponentSmall = styled.img`\n  height: 15px;\n  text-align: left;\n  opacity: 0.5;\n  width: 100%;\n  height: 500;\n`;\nconst StyledVideo = styled.video`\n  width: 100%;\n  height:500\n  position: static;\n  border-radius: 10px;\n  overflow: hidden;\n  margin: 1px;\n  border: 5px solid gray;\n`;\n\nconst Video = props => {\n  const ref = useRef();\n  useEffect(() => {\n    props.peer.on(\"stream\", stream => {\n      ref.current.srcObject = stream;\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(StyledVideo, {\n    playsInline: true,\n    autoPlay: true,\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 10\n    }\n  });\n};\n\nconst Room = props => {\n  const [peers, setPeers] = useState([]);\n  const [audioFlag, setAudioFlag] = useState(true);\n  const [videoFlag, setVideoFlag] = useState(true);\n  const [userUpdate, setUserUpdate] = useState([]);\n  const socketRef = useRef();\n  const userVideo = useRef();\n  const peersRef = useRef([]);\n  const roomID = props.match.params.roomID;\n  const videoConstraints = {\n    minAspectRatio: 1.333,\n    minFrameRate: 60,\n    height: window.innerHeight / 1.8,\n    width: window.innerWidth / 2\n  };\n  useEffect(() => {\n    socketRef.current = io.connect(\"/\");\n    createStream();\n  }, []);\n\n  function createStream() {\n    navigator.mediaDevices.getUserMedia({\n      video: videoConstraints,\n      audio: true\n    }).then(stream => {\n      userVideo.current.srcObject = stream;\n      socketRef.current.emit(\"join room\", roomID);\n      socketRef.current.on(\"all users\", users => {\n        console.log(users);\n        const peers = [];\n        users.forEach(userID => {\n          const peer = createPeer(userID, socketRef.current.id, stream);\n          peersRef.current.push({\n            peerID: userID,\n            peer\n          });\n          peers.push({\n            peerID: userID,\n            peer\n          });\n        });\n        setPeers(peers);\n      });\n      socketRef.current.on(\"user joined\", payload => {\n        console.log(\"==\", payload);\n        const peer = addPeer(payload.signal, payload.callerID, stream);\n        peersRef.current.push({\n          peerID: payload.callerID,\n          peer\n        });\n        const peerObj = {\n          peer,\n          peerID: payload.callerID\n        };\n        setPeers(users => [...users, peerObj]);\n      });\n      socketRef.current.on(\"user left\", id => {\n        const peerObj = peersRef.current.find(p => p.peerID === id);\n\n        if (peerObj) {\n          peerObj.peer.destroy();\n        }\n\n        const peers = peersRef.current.filter(p => p.peerID !== id);\n        peersRef.current = peers;\n        setPeers(peers);\n      });\n      socketRef.current.on(\"receiving returned signal\", payload => {\n        const item = peersRef.current.find(p => p.peerID === payload.id);\n        item.peer.signal(payload.signal);\n      });\n      socketRef.current.on(\"change\", payload => {\n        setUserUpdate(payload);\n      });\n    });\n  }\n\n  function createPeer(userToSignal, callerID, stream) {\n    const peer = new Peer({\n      initiator: true,\n      trickle: false,\n      stream\n    });\n    peer.on(\"signal\", signal => {\n      socketRef.current.emit(\"sending signal\", {\n        userToSignal,\n        callerID,\n        signal\n      });\n    });\n    return peer;\n  }\n\n  function addPeer(incomingSignal, callerID, stream) {\n    const peer = new Peer({\n      initiator: false,\n      trickle: false,\n      stream\n    });\n    peer.on(\"signal\", signal => {\n      socketRef.current.emit(\"returning signal\", {\n        signal,\n        callerID\n      });\n    });\n    peer.signal(incomingSignal);\n    return peer;\n  }\n\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(StyledVideo, {\n    muted: true,\n    ref: userVideo,\n    autoPlay: true,\n    playsInline: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Controls, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ImgComponent, {\n    src: videoFlag ? webcam : webcamoff,\n    onClick: () => {\n      if (userVideo.current.srcObject) {\n        userVideo.current.srcObject.getTracks().forEach(function (track) {\n          if (track.kind === \"video\") {\n            if (track.enabled) {\n              socketRef.current.emit(\"change\", [...userUpdate, {\n                id: socketRef.current.id,\n                videoFlag: false,\n                audioFlag\n              }]);\n              track.enabled = false;\n              setVideoFlag(false);\n            } else {\n              socketRef.current.emit(\"change\", [...userUpdate, {\n                id: socketRef.current.id,\n                videoFlag: true,\n                audioFlag\n              }]);\n              track.enabled = true;\n              setVideoFlag(true);\n            }\n          }\n        });\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 9\n    }\n  }), \"\\xA0\\xA0\\xA0\", /*#__PURE__*/React.createElement(ImgComponent, {\n    src: audioFlag ? micunmute : micmute,\n    onClick: () => {\n      if (userVideo.current.srcObject) {\n        userVideo.current.srcObject.getTracks().forEach(function (track) {\n          if (track.kind === \"audio\") {\n            if (track.enabled) {\n              socketRef.current.emit(\"change\", [...userUpdate, {\n                id: socketRef.current.id,\n                videoFlag,\n                audioFlag: false\n              }]);\n              track.enabled = false;\n              setAudioFlag(false);\n            } else {\n              socketRef.current.emit(\"change\", [...userUpdate, {\n                id: socketRef.current.id,\n                videoFlag,\n                audioFlag: true\n              }]);\n              track.enabled = true;\n              setAudioFlag(true);\n            }\n          }\n        });\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 9\n    }\n  })), peers.map((peer, index) => {\n    let audioFlagTemp = true;\n    let videoFlagTemp = true;\n\n    if (userUpdate) {\n      userUpdate.forEach(entry => {\n        if (peer && peer.peerID && peer.peerID === entry.id) {\n          audioFlagTemp = entry.audioFlag;\n          videoFlagTemp = entry.videoFlag;\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: peer.peerID,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Video, {\n      peer: peer.peer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(ControlSmall, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ImgComponentSmall, {\n      src: videoFlagTemp ? webcam : webcamoff,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 15\n      }\n    }), \"\\xA0\\xA0\\xA0\", /*#__PURE__*/React.createElement(ImgComponentSmall, {\n      src: audioFlagTemp ? micunmute : micmute,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 15\n      }\n    })));\n  }));\n};\n\nexport default Room;","map":{"version":3,"names":["React","useEffect","useRef","useState","io","Peer","styled","Container","div","Controls","ControlSmall","ImgComponent","img","ImgComponentSmall","StyledVideo","video","Video","props","ref","peer","on","stream","current","srcObject","Room","peers","setPeers","audioFlag","setAudioFlag","videoFlag","setVideoFlag","userUpdate","setUserUpdate","socketRef","userVideo","peersRef","roomID","match","params","videoConstraints","minAspectRatio","minFrameRate","height","window","innerHeight","width","innerWidth","connect","createStream","navigator","mediaDevices","getUserMedia","audio","then","emit","users","console","log","forEach","userID","createPeer","id","push","peerID","payload","addPeer","signal","callerID","peerObj","find","p","destroy","filter","item","userToSignal","initiator","trickle","incomingSignal","webcam","webcamoff","getTracks","track","kind","enabled","micunmute","micmute","map","index","audioFlagTemp","videoFlagTemp","entry"],"sources":["/Users/faheem/Documents/RESEARCH/VideoCall-ReactJS-WebRTC/client/src/routes/Room.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport Peer from \"simple-peer\";\nimport styled from \"styled-components\";\nimport micmute from \"../assets/micmute.svg\";\nimport micunmute from \"../assets/micunmute.svg\";\nimport webcam from \"../assets/webcam.svg\";\nimport webcamoff from \"../assets/webcamoff.svg\";\n\nconst Container = styled.div`\n  height: 100vh;\n  width: 20%;\n  height: 500;\n`;\n\nconst Controls = styled.div`\n  margin: 3px;\n  padding: 5px;\n  height: 27px;\n  width: 98%;\n  background-color: rgba(255, 226, 104, 0.1);\n  margin-top: -8.5vh;\n  filter: brightness(1);\n  z-index: 1;\n  border-radius: 6px;\n  height: 500;\n`;\n\nconst ControlSmall = styled.div`\n  margin: 3px;\n  padding: 5px;\n  height: 16px;\n  width: 98%;\n  margin-top: -6vh;\n  filter: brightness(1);\n  z-index: 1;\n  border-radius: 6px;\n  display: flex;\n  justify-content: center;\n  width: 100%;\n  height: 500;\n`;\n\nconst ImgComponent = styled.img`\n  cursor: pointer;\n  height: 25px;\n  width: 100%;\n  height: 500;\n`;\n\nconst ImgComponentSmall = styled.img`\n  height: 15px;\n  text-align: left;\n  opacity: 0.5;\n  width: 100%;\n  height: 500;\n`;\n\nconst StyledVideo = styled.video`\n  width: 100%;\n  height:500\n  position: static;\n  border-radius: 10px;\n  overflow: hidden;\n  margin: 1px;\n  border: 5px solid gray;\n`;\n\nconst Video = (props) => {\n  const ref = useRef();\n\n  useEffect(() => {\n    props.peer.on(\"stream\", (stream) => {\n      ref.current.srcObject = stream;\n    });\n  }, []);\n\n  return <StyledVideo playsInline autoPlay ref={ref} />;\n};\n\nconst Room = (props) => {\n  const [peers, setPeers] = useState([]);\n  const [audioFlag, setAudioFlag] = useState(true);\n  const [videoFlag, setVideoFlag] = useState(true);\n  const [userUpdate, setUserUpdate] = useState([]);\n  const socketRef = useRef();\n  const userVideo = useRef();\n  const peersRef = useRef([]);\n  const roomID = props.match.params.roomID;\n  const videoConstraints = {\n    minAspectRatio: 1.333,\n    minFrameRate: 60,\n    height: window.innerHeight / 1.8,\n    width: window.innerWidth / 2,\n  };\n  useEffect(() => {\n    socketRef.current = io.connect(\"/\");\n    createStream();\n  }, []);\n\n  function createStream() {\n    navigator.mediaDevices\n      .getUserMedia({ video: videoConstraints, audio: true })\n      .then((stream) => {\n        userVideo.current.srcObject = stream;\n        socketRef.current.emit(\"join room\", roomID);\n        socketRef.current.on(\"all users\", (users) => {\n          console.log(users);\n          const peers = [];\n          users.forEach((userID) => {\n            const peer = createPeer(userID, socketRef.current.id, stream);\n            peersRef.current.push({\n              peerID: userID,\n              peer,\n            });\n            peers.push({\n              peerID: userID,\n              peer,\n            });\n          });\n          setPeers(peers);\n        });\n        socketRef.current.on(\"user joined\", (payload) => {\n          console.log(\"==\", payload);\n          const peer = addPeer(payload.signal, payload.callerID, stream);\n          peersRef.current.push({\n            peerID: payload.callerID,\n            peer,\n          });\n          const peerObj = {\n            peer,\n            peerID: payload.callerID,\n          };\n          setPeers((users) => [...users, peerObj]);\n        });\n\n        socketRef.current.on(\"user left\", (id) => {\n          const peerObj = peersRef.current.find((p) => p.peerID === id);\n          if (peerObj) {\n            peerObj.peer.destroy();\n          }\n          const peers = peersRef.current.filter((p) => p.peerID !== id);\n          peersRef.current = peers;\n          setPeers(peers);\n        });\n\n        socketRef.current.on(\"receiving returned signal\", (payload) => {\n          const item = peersRef.current.find((p) => p.peerID === payload.id);\n          item.peer.signal(payload.signal);\n        });\n\n        socketRef.current.on(\"change\", (payload) => {\n          setUserUpdate(payload);\n        });\n      });\n  }\n\n  function createPeer(userToSignal, callerID, stream) {\n    const peer = new Peer({\n      initiator: true,\n      trickle: false,\n      stream,\n    });\n\n    peer.on(\"signal\", (signal) => {\n      socketRef.current.emit(\"sending signal\", {\n        userToSignal,\n        callerID,\n        signal,\n      });\n    });\n\n    return peer;\n  }\n\n  function addPeer(incomingSignal, callerID, stream) {\n    const peer = new Peer({\n      initiator: false,\n      trickle: false,\n      stream,\n    });\n\n    peer.on(\"signal\", (signal) => {\n      socketRef.current.emit(\"returning signal\", { signal, callerID });\n    });\n\n    peer.signal(incomingSignal);\n\n    return peer;\n  }\n\n  return (\n    <Container>\n      <StyledVideo muted ref={userVideo} autoPlay playsInline />\n      <Controls>\n        <ImgComponent\n          src={videoFlag ? webcam : webcamoff}\n          onClick={() => {\n            if (userVideo.current.srcObject) {\n              userVideo.current.srcObject.getTracks().forEach(function (track) {\n                if (track.kind === \"video\") {\n                  if (track.enabled) {\n                    socketRef.current.emit(\"change\", [\n                      ...userUpdate,\n                      {\n                        id: socketRef.current.id,\n                        videoFlag: false,\n                        audioFlag,\n                      },\n                    ]);\n                    track.enabled = false;\n                    setVideoFlag(false);\n                  } else {\n                    socketRef.current.emit(\"change\", [\n                      ...userUpdate,\n                      {\n                        id: socketRef.current.id,\n                        videoFlag: true,\n                        audioFlag,\n                      },\n                    ]);\n                    track.enabled = true;\n                    setVideoFlag(true);\n                  }\n                }\n              });\n            }\n          }}\n        />\n        &nbsp;&nbsp;&nbsp;\n        <ImgComponent\n          src={audioFlag ? micunmute : micmute}\n          onClick={() => {\n            if (userVideo.current.srcObject) {\n              userVideo.current.srcObject.getTracks().forEach(function (track) {\n                if (track.kind === \"audio\") {\n                  if (track.enabled) {\n                    socketRef.current.emit(\"change\", [\n                      ...userUpdate,\n                      {\n                        id: socketRef.current.id,\n                        videoFlag,\n                        audioFlag: false,\n                      },\n                    ]);\n                    track.enabled = false;\n                    setAudioFlag(false);\n                  } else {\n                    socketRef.current.emit(\"change\", [\n                      ...userUpdate,\n                      {\n                        id: socketRef.current.id,\n                        videoFlag,\n                        audioFlag: true,\n                      },\n                    ]);\n                    track.enabled = true;\n                    setAudioFlag(true);\n                  }\n                }\n              });\n            }\n          }}\n        />\n      </Controls>\n      {peers.map((peer, index) => {\n        let audioFlagTemp = true;\n        let videoFlagTemp = true;\n        if (userUpdate) {\n          userUpdate.forEach((entry) => {\n            if (peer && peer.peerID && peer.peerID === entry.id) {\n              audioFlagTemp = entry.audioFlag;\n              videoFlagTemp = entry.videoFlag;\n            }\n          });\n        }\n        return (\n          <div key={peer.peerID}>\n            <Video peer={peer.peer} />\n            <ControlSmall>\n              <ImgComponentSmall src={videoFlagTemp ? webcam : webcamoff} />\n              &nbsp;&nbsp;&nbsp;\n              <ImgComponentSmall src={audioFlagTemp ? micunmute : micmute} />\n            </ControlSmall>\n          </div>\n        );\n      })}\n    </Container>\n  );\n};\n\nexport default Room;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
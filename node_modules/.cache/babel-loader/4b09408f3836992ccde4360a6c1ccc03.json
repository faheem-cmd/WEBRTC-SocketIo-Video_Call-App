{"ast":null,"code":"import _toConsumableArray from\"/Users/faheem/Documents/RESEARCH/VideoCall-ReactJS-WebRTC/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/faheem/Documents/RESEARCH/VideoCall-ReactJS-WebRTC/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/faheem/Documents/RESEARCH/VideoCall-ReactJS-WebRTC/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6;import React,{useEffect,useRef,useState}from\"react\";import io from\"socket.io-client\";import Peer from\"simple-peer\";import styled from\"styled-components\";import micmute from\"../assets/micmute.svg\";import micunmute from\"../assets/micunmute.svg\";import webcam from\"../assets/webcam.svg\";import webcamoff from\"../assets/webcamoff.svg\";var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  height: 100vh;\\n  width: 20%;\\n\"])));var Controls=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  margin: 3px;\\n  padding: 5px;\\n  height: 27px;\\n  width: 98%;\\n  background-color: rgba(255, 226, 104, 0.1);\\n  margin-top: -8.5vh;\\n  filter: brightness(1);\\n  z-index: 1;\\n  border-radius: 6px;\\n\"])));var ControlSmall=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  margin: 3px;\\n  padding: 5px;\\n  height: 16px;\\n  width: 98%;\\n  margin-top: -6vh;\\n  filter: brightness(1);\\n  z-index: 1;\\n  border-radius: 6px;\\n  display: flex;\\n  justify-content: center;\\n\"])));var ImgComponent=styled.img(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  cursor: pointer;\\n  height: 25px;\\n\"])));var ImgComponentSmall=styled.img(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  height: 15px;\\n  text-align: left;\\n  opacity: 0.5;\\n\"])));var StyledVideo=styled.video(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  position: static;\\n  border-radius: 10px;\\n  overflow: hidden;\\n  margin: 1px;\\n  border: 5px solid gray;\\n\"])));var Video=function Video(props){var ref=useRef();useEffect(function(){props.peer.on(\"stream\",function(stream){ref.current.srcObject=stream;});},[]);return/*#__PURE__*/React.createElement(StyledVideo,{playsInline:true,autoPlay:true,ref:ref});};var Room=function Room(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),peers=_useState2[0],setPeers=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),audioFlag=_useState4[0],setAudioFlag=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),videoFlag=_useState6[0],setVideoFlag=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),userUpdate=_useState8[0],setUserUpdate=_useState8[1];var socketRef=useRef();var userVideo=useRef();var peersRef=useRef([]);var roomID=props.match.params.roomID;var videoConstraints={minAspectRatio:1.333,minFrameRate:60,height:window.innerHeight/1.8,width:window.innerWidth/2};useEffect(function(){socketRef.current=io.connect(\"/\");createStream();},[]);function createStream(){navigator.mediaDevices.getUserMedia({video:videoConstraints,audio:true}).then(function(stream){userVideo.current.srcObject=stream;socketRef.current.emit(\"join room\",roomID);socketRef.current.on(\"all users\",function(users){console.log(users);var peers=[];users.forEach(function(userID){var peer=createPeer(userID,socketRef.current.id,stream);peersRef.current.push({peerID:userID,peer:peer});peers.push({peerID:userID,peer:peer});});setPeers(peers);});socketRef.current.on(\"user joined\",function(payload){console.log(\"==\",payload);var peer=addPeer(payload.signal,payload.callerID,stream);peersRef.current.push({peerID:payload.callerID,peer:peer});var peerObj={peer:peer,peerID:payload.callerID};setPeers(function(users){return[].concat(_toConsumableArray(users),[peerObj]);});});socketRef.current.on(\"user left\",function(id){var peerObj=peersRef.current.find(function(p){return p.peerID===id;});if(peerObj){peerObj.peer.destroy();}var peers=peersRef.current.filter(function(p){return p.peerID!==id;});peersRef.current=peers;setPeers(peers);});socketRef.current.on(\"receiving returned signal\",function(payload){var item=peersRef.current.find(function(p){return p.peerID===payload.id;});item.peer.signal(payload.signal);});socketRef.current.on(\"change\",function(payload){setUserUpdate(payload);});});}function createPeer(userToSignal,callerID,stream){var peer=new Peer({initiator:true,trickle:false,stream:stream});peer.on(\"signal\",function(signal){socketRef.current.emit(\"sending signal\",{userToSignal:userToSignal,callerID:callerID,signal:signal});});return peer;}function addPeer(incomingSignal,callerID,stream){var peer=new Peer({initiator:false,trickle:false,stream:stream});peer.on(\"signal\",function(signal){socketRef.current.emit(\"returning signal\",{signal:signal,callerID:callerID});});peer.signal(incomingSignal);return peer;}return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(StyledVideo,{muted:true,ref:userVideo,autoPlay:true,playsInline:true}),/*#__PURE__*/React.createElement(Controls,null,/*#__PURE__*/React.createElement(ImgComponent,{src:videoFlag?webcam:webcamoff,onClick:function onClick(){if(userVideo.current.srcObject){userVideo.current.srcObject.getTracks().forEach(function(track){if(track.kind===\"video\"){if(track.enabled){socketRef.current.emit(\"change\",[].concat(_toConsumableArray(userUpdate),[{id:socketRef.current.id,videoFlag:false,audioFlag:audioFlag}]));track.enabled=false;setVideoFlag(false);}else{socketRef.current.emit(\"change\",[].concat(_toConsumableArray(userUpdate),[{id:socketRef.current.id,videoFlag:true,audioFlag:audioFlag}]));track.enabled=true;setVideoFlag(true);}}});}}}),\"\\xA0\\xA0\\xA0\",/*#__PURE__*/React.createElement(ImgComponent,{src:audioFlag?micunmute:micmute,onClick:function onClick(){if(userVideo.current.srcObject){userVideo.current.srcObject.getTracks().forEach(function(track){if(track.kind===\"audio\"){if(track.enabled){socketRef.current.emit(\"change\",[].concat(_toConsumableArray(userUpdate),[{id:socketRef.current.id,videoFlag:videoFlag,audioFlag:false}]));track.enabled=false;setAudioFlag(false);}else{socketRef.current.emit(\"change\",[].concat(_toConsumableArray(userUpdate),[{id:socketRef.current.id,videoFlag:videoFlag,audioFlag:true}]));track.enabled=true;setAudioFlag(true);}}});}}})),peers.map(function(peer,index){var audioFlagTemp=true;var videoFlagTemp=true;if(userUpdate){userUpdate.forEach(function(entry){if(peer&&peer.peerID&&peer.peerID===entry.id){audioFlagTemp=entry.audioFlag;videoFlagTemp=entry.videoFlag;}});}return/*#__PURE__*/React.createElement(\"div\",{key:peer.peerID},/*#__PURE__*/React.createElement(Video,{peer:peer.peer}),/*#__PURE__*/React.createElement(ControlSmall,null,/*#__PURE__*/React.createElement(ImgComponentSmall,{src:videoFlagTemp?webcam:webcamoff}),\"\\xA0\\xA0\\xA0\",/*#__PURE__*/React.createElement(ImgComponentSmall,{src:audioFlagTemp?micunmute:micmute})));}));};export default Room;","map":{"version":3,"names":["React","useEffect","useRef","useState","io","Peer","styled","Container","div","Controls","ControlSmall","ImgComponent","img","ImgComponentSmall","StyledVideo","video","Video","props","ref","peer","on","stream","current","srcObject","Room","peers","setPeers","audioFlag","setAudioFlag","videoFlag","setVideoFlag","userUpdate","setUserUpdate","socketRef","userVideo","peersRef","roomID","match","params","videoConstraints","minAspectRatio","minFrameRate","height","window","innerHeight","width","innerWidth","connect","createStream","navigator","mediaDevices","getUserMedia","audio","then","emit","users","console","log","forEach","userID","createPeer","id","push","peerID","payload","addPeer","signal","callerID","peerObj","find","p","destroy","filter","item","userToSignal","initiator","trickle","incomingSignal","webcam","webcamoff","getTracks","track","kind","enabled","micunmute","micmute","map","index","audioFlagTemp","videoFlagTemp","entry"],"sources":["/Users/faheem/Documents/RESEARCH/VideoCall-ReactJS-WebRTC/client/src/routes/Room.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport Peer from \"simple-peer\";\nimport styled from \"styled-components\";\nimport micmute from \"../assets/micmute.svg\";\nimport micunmute from \"../assets/micunmute.svg\";\nimport webcam from \"../assets/webcam.svg\";\nimport webcamoff from \"../assets/webcamoff.svg\";\n\nconst Container = styled.div`\n  height: 100vh;\n  width: 20%;\n`;\n\nconst Controls = styled.div`\n  margin: 3px;\n  padding: 5px;\n  height: 27px;\n  width: 98%;\n  background-color: rgba(255, 226, 104, 0.1);\n  margin-top: -8.5vh;\n  filter: brightness(1);\n  z-index: 1;\n  border-radius: 6px;\n`;\n\nconst ControlSmall = styled.div`\n  margin: 3px;\n  padding: 5px;\n  height: 16px;\n  width: 98%;\n  margin-top: -6vh;\n  filter: brightness(1);\n  z-index: 1;\n  border-radius: 6px;\n  display: flex;\n  justify-content: center;\n`;\n\nconst ImgComponent = styled.img`\n  cursor: pointer;\n  height: 25px;\n`;\n\nconst ImgComponentSmall = styled.img`\n  height: 15px;\n  text-align: left;\n  opacity: 0.5;\n`;\n\nconst StyledVideo = styled.video`\n  width: 100%;\n  position: static;\n  border-radius: 10px;\n  overflow: hidden;\n  margin: 1px;\n  border: 5px solid gray;\n`;\n\nconst Video = (props) => {\n  const ref = useRef();\n\n  useEffect(() => {\n    props.peer.on(\"stream\", (stream) => {\n      ref.current.srcObject = stream;\n    });\n  }, []);\n\n  return <StyledVideo playsInline autoPlay ref={ref} />;\n};\n\nconst Room = (props) => {\n  const [peers, setPeers] = useState([]);\n  const [audioFlag, setAudioFlag] = useState(true);\n  const [videoFlag, setVideoFlag] = useState(true);\n  const [userUpdate, setUserUpdate] = useState([]);\n  const socketRef = useRef();\n  const userVideo = useRef();\n  const peersRef = useRef([]);\n  const roomID = props.match.params.roomID;\n  const videoConstraints = {\n    minAspectRatio: 1.333,\n    minFrameRate: 60,\n    height: window.innerHeight / 1.8,\n    width: window.innerWidth / 2,\n  };\n  useEffect(() => {\n    socketRef.current = io.connect(\"/\");\n    createStream();\n  }, []);\n\n  function createStream() {\n    navigator.mediaDevices\n      .getUserMedia({ video: videoConstraints, audio: true })\n      .then((stream) => {\n        userVideo.current.srcObject = stream;\n        socketRef.current.emit(\"join room\", roomID);\n        socketRef.current.on(\"all users\", (users) => {\n          console.log(users)\n          const peers = [];\n          users.forEach((userID) => {\n            const peer = createPeer(userID, socketRef.current.id, stream);\n            peersRef.current.push({\n              peerID: userID,\n              peer,\n            });\n            peers.push({\n              peerID: userID,\n              peer,\n            });\n          });\n          setPeers(peers);\n        });\n        socketRef.current.on(\"user joined\", (payload) => {\n          console.log(\"==\",payload)\n          const peer = addPeer(payload.signal, payload.callerID, stream);\n          peersRef.current.push({\n            peerID: payload.callerID,\n            peer,\n          });\n          const peerObj = {\n            peer,\n            peerID: payload.callerID,\n          };\n          setPeers((users) => [...users, peerObj]);\n        });\n\n        socketRef.current.on(\"user left\", (id) => {\n          const peerObj = peersRef.current.find((p) => p.peerID === id);\n          if (peerObj) {\n            peerObj.peer.destroy();\n          }\n          const peers = peersRef.current.filter((p) => p.peerID !== id);\n          peersRef.current = peers;\n          setPeers(peers);\n        });\n\n        socketRef.current.on(\"receiving returned signal\", (payload) => {\n          const item = peersRef.current.find((p) => p.peerID === payload.id);\n          item.peer.signal(payload.signal);\n        });\n\n        socketRef.current.on(\"change\", (payload) => {\n          setUserUpdate(payload);\n        });\n      });\n  }\n\n  function createPeer(userToSignal, callerID, stream) {\n    const peer = new Peer({\n      initiator: true,\n      trickle: false,\n      stream,\n    });\n\n    peer.on(\"signal\", (signal) => {\n      socketRef.current.emit(\"sending signal\", {\n        userToSignal,\n        callerID,\n        signal,\n      });\n    });\n\n    return peer;\n  }\n\n  function addPeer(incomingSignal, callerID, stream) {\n    const peer = new Peer({\n      initiator: false,\n      trickle: false,\n      stream,\n    });\n\n    peer.on(\"signal\", (signal) => {\n      socketRef.current.emit(\"returning signal\", { signal, callerID });\n    });\n\n    peer.signal(incomingSignal);\n\n    return peer;\n  }\n\n  return (\n    <Container>\n      <StyledVideo muted ref={userVideo} autoPlay playsInline />\n      <Controls>\n        <ImgComponent\n          src={videoFlag ? webcam : webcamoff}\n          onClick={() => {\n            if (userVideo.current.srcObject) {\n              userVideo.current.srcObject.getTracks().forEach(function (track) {\n                if (track.kind === \"video\") {\n                  if (track.enabled) {\n                    socketRef.current.emit(\"change\", [...userUpdate,{\n                      id: socketRef.current.id,\n                      videoFlag: false,\n                      audioFlag,\n                    }]);\n                    track.enabled = false;\n                    setVideoFlag(false);\n                  } else {\n                    socketRef.current.emit(\"change\", [...userUpdate,{\n                      id: socketRef.current.id,\n                      videoFlag: true,\n                      audioFlag,\n                    }]);\n                    track.enabled = true;\n                    setVideoFlag(true);\n                  }\n                }\n              });\n            }\n          }}\n        />\n        &nbsp;&nbsp;&nbsp;\n        <ImgComponent\n          src={audioFlag ? micunmute : micmute}\n          onClick={() => {\n            if (userVideo.current.srcObject) {\n              userVideo.current.srcObject.getTracks().forEach(function (track) {\n                if (track.kind === \"audio\") {\n                  if (track.enabled) {\n                    socketRef.current.emit(\"change\",[...userUpdate, {\n                      id: socketRef.current.id,\n                      videoFlag,\n                      audioFlag: false,\n                    }]);\n                    track.enabled = false;\n                    setAudioFlag(false);\n                  } else {\n                    socketRef.current.emit(\"change\",[...userUpdate, {\n                      id: socketRef.current.id,\n                      videoFlag,\n                      audioFlag: true,\n                    }]);\n                    track.enabled = true;\n                    setAudioFlag(true);\n                  }\n                }\n              });\n            }\n          }}\n        />\n      </Controls>\n      {peers.map((peer, index) => {\n        let audioFlagTemp = true;\n        let videoFlagTemp = true;\n        if (userUpdate) {\n          userUpdate.forEach((entry) => {\n            if (peer && peer.peerID && peer.peerID === entry.id) {\n              audioFlagTemp = entry.audioFlag;\n              videoFlagTemp = entry.videoFlag;\n            }\n          });\n        }\n        return (\n          <div key={peer.peerID} >\n            <Video peer={peer.peer} />\n            <ControlSmall>\n              <ImgComponentSmall src={videoFlagTemp ? webcam : webcamoff} />\n              &nbsp;&nbsp;&nbsp;\n              <ImgComponentSmall src={audioFlagTemp ? micunmute : micmute} />\n            </ControlSmall>\n          </div>\n        );\n      })}\n    </Container>\n  );\n};\n\nexport default Room;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
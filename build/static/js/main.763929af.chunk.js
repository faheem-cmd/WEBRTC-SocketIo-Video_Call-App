(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{121:function(e,n){},123:function(e,n){},131:function(e,n,t){e.exports=t.p+"static/media/micmute.71c818c4.svg"},132:function(e,n,t){e.exports=t.p+"static/media/micunmute.d15ab7f5.svg"},133:function(e,n,t){e.exports=t.p+"static/media/webcam.9f0afb70.svg"},134:function(e,n,t){e.exports=t.p+"static/media/webcamoff.f87f6879.svg"},139:function(e,n,t){"use strict";t.r(n);var r,a,i,c,o,u,l=t(0),s=t.n(l),p=t(60),f=t.n(p),d=t(65),m=t(1),g=t(141),h=function(e){return s.a.createElement("button",{onClick:function(){var n=Object(g.a)();e.history.push("/room/".concat(n))}},"Create room")},b=t(66),v=t(21),j=t(10),O=t(61),x=t.n(O),I=t(33),E=t.n(I),D=t(11),w=(t(131),t(132),t(133),t(134),D.a.div(r||(r=Object(j.a)(["\n  height: 100vh;\n  width: 20%;\n"])))),y=D.a.div(a||(a=Object(j.a)(["\n  margin: 3px;\n  padding: 5px;\n  height: 27px;\n  width: 98%;\n  background-color: rgba(255, 226, 104, 0.1);\n  margin-top: -8.5vh;\n  filter: brightness(1);\n  z-index: 1;\n  border-radius: 6px;\n"]))),k=D.a.div(i||(i=Object(j.a)(["\n  margin: 3px;\n  padding: 5px;\n  height: 16px;\n  width: 98%;\n  margin-top: -6vh;\n  filter: brightness(1);\n  z-index: 1;\n  border-radius: 6px;\n  display: flex;\n  justify-content: center;\n"]))),R=(D.a.img(c||(c=Object(j.a)(["\n  cursor: pointer;\n  height: 25px;\n"]))),D.a.img(o||(o=Object(j.a)(["\n  height: 15px;\n  text-align: left;\n  opacity: 0.5;\n"]))),D.a.video(u||(u=Object(j.a)(["\n  width: 400;\n  position: static;\n  height:800,\n  border-radius: 10px;\n  overflow: hidden;\n  margin: 1px;\n  border: 5px solid gray;\n"])))),S=function(e){var n=Object(l.useRef)();return Object(l.useEffect)((function(){e.peer.on("stream",(function(e){n.current.srcObject=e}))}),[]),s.a.createElement(R,{playsInline:!0,autoPlay:!0,ref:n})},F=function(e){var n=Object(l.useState)([]),t=Object(v.a)(n,2),r=t[0],a=t[1],i=Object(l.useState)(!0),c=Object(v.a)(i,2),o=(c[0],c[1],Object(l.useState)(!0)),u=Object(v.a)(o,2),p=(u[0],u[1],Object(l.useState)([])),f=Object(v.a)(p,2),d=f[0],m=f[1],g=Object(l.useRef)(),h=Object(l.useRef)(),j=Object(l.useRef)([]),O=e.match.params.roomID,I={minAspectRatio:1.333,minFrameRate:60,height:window.innerHeight/1.8,width:window.innerWidth/2};return Object(l.useEffect)((function(){g.current=x.a.connect("/"),navigator.mediaDevices.getUserMedia({video:I,audio:!0}).then((function(e){h.current.srcObject=e,g.current.emit("join room",O),g.current.on("all users",(function(n){console.log(n);var t=[];n.forEach((function(n){var r=function(e,n,t){var r=new E.a({initiator:!0,trickle:!1,stream:t});return r.on("signal",(function(t){g.current.emit("sending signal",{userToSignal:e,callerID:n,signal:t})})),r}(n,g.current.id,e);j.current.push({peerID:n,peer:r}),t.push({peerID:n,peer:r})})),a(t)})),g.current.on("user joined",(function(n){console.log("==",n);var t=function(e,n,t){var r=new E.a({initiator:!1,trickle:!1,stream:t});return r.on("signal",(function(e){g.current.emit("returning signal",{signal:e,callerID:n})})),r.signal(e),r}(n.signal,n.callerID,e);j.current.push({peerID:n.callerID,peer:t});var r={peer:t,peerID:n.callerID};a((function(e){return[].concat(Object(b.a)(e),[r])}))})),g.current.on("user left",(function(e){var n=j.current.find((function(n){return n.peerID===e}));n&&n.peer.destroy();var t=j.current.filter((function(n){return n.peerID!==e}));j.current=t,a(t)})),g.current.on("receiving returned signal",(function(e){j.current.find((function(n){return n.peerID===e.id})).peer.signal(e.signal)})),g.current.on("change",(function(e){m(e)}))}))}),[]),s.a.createElement(w,null,s.a.createElement(R,{muted:!0,ref:h,autoPlay:!0,playsInline:!0}),s.a.createElement(y,null,"\xa0\xa0\xa0"),r.map((function(e,n){return d&&d.forEach((function(n){e&&e.peerID&&e.peerID===n.id&&(n.audioFlag,n.videoFlag)})),s.a.createElement("div",{key:e.peerID},s.a.createElement(S,{peer:e.peer}),s.a.createElement(k,null,"\xa0\xa0\xa0"))})))};var z=function(){return s.a.createElement(d.a,null,s.a.createElement(m.c,null,s.a.createElement(m.a,{path:"/",exact:!0,component:h}),s.a.createElement(m.a,{path:"/room/:roomID",component:F})))};f.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(z,null)),document.getElementById("root"))},67:function(e,n,t){e.exports=t(139)},97:function(e,n){}},[[67,1,2]]]);
//# sourceMappingURL=main.763929af.chunk.js.map